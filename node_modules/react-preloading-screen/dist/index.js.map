{"version":3,"file":"index.js","sources":["../index.js"],"sourcesContent":["/* @flow */\nimport * as React from 'react';\n\ntype PreloaderProps = {\n\tfadeDuration?: number,\n\tclassName?: string,\n\tchildren?: React.Node,\n\tstyle: {\n\t\t[string]: mixed\n\t}\n};\n\ntype PreloaderState = {\n\tloaded: boolean\n};\n\ntype PlaceholderProps = {\n\tchildren?: React.Node\n};\n\nconst defaultStyle = {\n\topacity: 1,\n\tzIndex: 999,\n\tbackgroundColor: 'white',\n\theight: '100vh',\n\twidth: '100vw',\n\tposition: 'fixed',\n\ttop: 0,\n\tleft: 0,\n\tdisplay: 'flex',\n\tjustifyContent: 'center',\n\talignItems: 'center',\n};\n\nclass Preloader extends React.Component<PreloaderProps, PreloaderState> {\n\tstate = { loaded: false };\n\n\tref: ?HTMLDivElement;\n\n\tcomponentDidMount = () => {\n\t\twindow.requestAnimationFrame(this.checkReadyState);\n\t};\n\n\tcheckReadyState = () => {\n\t\tif (document.readyState === 'complete' && this.ref) {\n\t\t\tthis.ref.style.opacity = '0';\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.setState({ loaded: true });\n\t\t\t\tthis.ref = null;\n\t\t\t}, this.props.fadeDuration || 200);\n\t\t} else {\n\t\t\twindow.requestAnimationFrame(this.checkReadyState);\n\t\t}\n\t};\n\n\trender() {\n\t\tconst { style, className, children, fadeDuration } = this.props;\n\t\tconst PlaceholderComponent = React.Children.toArray(children)\n\t\t\t.find(({ type }) => type.displayName === 'PreloadingPlaceholder');\n\n\t\tif (!PlaceholderComponent) {\n\t\t\tconsole.warn('react-preloading-screen:', 'No <Placeholder> component found in children of <Preloader>. Preloader is not in effect.');\n\t\t\treturn children;\n\t\t}\n\n\t\tconst cleanChildren = React.Children.map(\n\t\t\tchildren,\n\t\t\t(child) =>\n\t\t\t\t(child.type.displayName === 'PreloadingPlaceholder' ? null : child)\n\t\t);\n\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t{cleanChildren}\n\t\t\t\t{\n\t\t\t\t\tthis.state.loaded\n\t\t\t\t\t\t? null\n\t\t\t\t\t\t: (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t...defaultStyle,\n\t\t\t\t\t\t\t\t\ttransition: `opacity ${fadeDuration || 200 / 1000}s ease`,\n\t\t\t\t\t\t\t\t\t...style,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tclassName={className}\n\t\t\t\t\t\t\t\tref={(ref) => {\n\t\t\t\t\t\t\t\t\tthis.ref = ref;\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{PlaceholderComponent}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nconst Placeholder = ({ children }: PlaceholderProps) => (\n\t<React.Fragment>{children}</React.Fragment>\n);\n\nPlaceholder.displayName = 'PreloadingPlaceholder';\n\nexport { Preloader, Placeholder };\n"],"names":["defaultStyle","opacity","zIndex","backgroundColor","height","width","position","top","left","display","justifyContent","alignItems","Preloader","loaded","window","requestAnimationFrame","checkReadyState","document","readyState","ref","style","setTimeout","setState","props","fadeDuration","className","children","PlaceholderComponent","React","toArray","find","type","displayName","console","warn","cleanChildren","map","child","React.createElement","React.Fragment","state","transition","Placeholder"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAoBA,IAAMA,eAAe;EACpBC,WAAS,CADW;EAEpBC,UAAQ,GAFY;EAGpBC,mBAAiB,OAHG;EAIpBC,UAAQ,OAJY;EAKpBC,SAAO,OALa;EAMpBC,YAAU,OANU;EAOpBC,OAAK,CAPe;EAQpBC,QAAM,CARc;EASpBC,WAAS,MATW;EAUpBC,kBAAgB,QAVI;EAWpBC,cAAY;EAXQ,CAArB;;MAcMC;;;;;;;;;;;;;;;;;;sFACG;EAAEC,cAAQ;EAAV;;;;kGAIY,YAAM;EACzBC,aAAOC,qBAAP,CAA6B,MAAKC,eAAlC;EACA;;gGAEiB,YAAM;EACvB,UAAIC,SAASC,UAAT,KAAwB,UAAxB,IAAsC,MAAKC,GAA/C,EAAoD;EACnD,cAAKA,GAAL,CAASC,KAAT,CAAenB,OAAf,GAAyB,GAAzB;EACAoB,mBAAW,YAAM;EAChB,gBAAKC,QAAL,CAAc;EAAET,oBAAQ;EAAV,WAAd;;EACA,gBAAKM,GAAL,GAAW,IAAX;EACA,SAHD,EAGG,MAAKI,KAAL,CAAWC,YAAX,IAA2B,GAH9B;EAIA,OAND,MAMO;EACNV,eAAOC,qBAAP,CAA6B,MAAKC,eAAlC;EACA;EACD;;;;;;;+BAEQ;EAAA;;EAAA,wBAC6C,KAAKO,KADlD;EAAA,UACAH,KADA,eACAA,KADA;EAAA,UACOK,SADP,eACOA,SADP;EAAA,UACkBC,QADlB,eACkBA,QADlB;EAAA,UAC4BF,YAD5B,eAC4BA,YAD5B;EAER,UAAMG,uBAAuBC,cAAA,CAAeC,OAAf,CAAuBH,QAAvB,EAC3BI,IAD2B,CACtB;EAAA,YAAGC,IAAH,QAAGA,IAAH;EAAA,eAAcA,KAAKC,WAAL,KAAqB,uBAAnC;EAAA,OADsB,CAA7B;;EAGA,UAAI,CAACL,oBAAL,EAA2B;EAC1BM,gBAAQC,IAAR,CAAa,0BAAb,EAAyC,0FAAzC;EACA,eAAOR,QAAP;EACA;;EAED,UAAMS,gBAAgBP,cAAA,CAAeQ,GAAf,CACrBV,QADqB,EAErB,UAACW,KAAD;EAAA,eACEA,MAAMN,IAAN,CAAWC,WAAX,KAA2B,uBAA3B,GAAqD,IAArD,GAA4DK,KAD9D;EAAA,OAFqB,CAAtB;EAMA,aACCC,oBAACC,cAAD,QACEJ,aADF,EAGE,KAAKK,KAAL,CAAW3B,MAAX,GACG,IADH,GAGEyB;EACC,iCACItC,YADJ;EAECyC,wCAAuBjB,gBAAgB,MAAM,IAA7C;EAFD,WAGIJ,KAHJ,CADD;EAMC,mBAAWK,SANZ;EAOC,aAAK,aAACN,KAAD,EAAS;EACb,iBAAKA,GAAL,GAAWA,KAAX;EACA;EATF,SAWEQ,oBAXF,CANJ,CADD;EAuBA;;;;IA5DsBC;;AA+DxB,MAAMc,cAAc,SAAdA,WAAc;EAAA,MAAGhB,QAAH,SAAGA,QAAH;EAAA,SACnBY,oBAACC,cAAD,QAAiBb,QAAjB,CADmB;EAAA,CAApB;;EAIAgB,YAAYV,WAAZ,GAA0B,uBAA1B;;;;;;;;;;;;;"}